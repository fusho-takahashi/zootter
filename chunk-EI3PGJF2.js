import{a as ne,b as ae,c as oe,d as re,e as se,f as le,g as me,h as ce,i as de,l as pe,m as ge,o as ue,p as fe}from"./chunk-3QXBDRB3.js";import{a as ie}from"./chunk-4EGTIT2N.js";import{a as ee,b as te}from"./chunk-2DN32XQQ.js";import"./chunk-WHBVZAYM.js";import{b as T,c as H,d as he,g as Ce,h as ye,i as Le,k as _e,l as ve,m as Me,o as Se}from"./chunk-BWKZS2ZY.js";import{O as $}from"./chunk-HQ3KQCWE.js";import{$a as r,$b as E,Aa as B,Ba as h,Bb as w,Db as W,Eb as q,Fb as a,Gb as o,Hb as u,Jb as x,Kb as D,Lb as Z,Ob as z,Pb as G,Vb as p,Wb as J,Xb as K,Ya as U,Zb as F,_b as O,aa as f,ac as Q,dc as X,e as I,ga as s,ib as c,na as L,oa as _,pc as Y,rb as C,sb as R,t as b,vb as P,xb as d}from"./chunk-T223ME74.js";var m=class e{animals=C([]);animalLoading=C(!1);loginLoading=C(!1);setAnimals=i=>this.animals.set(i);animalLoadingStart=()=>this.animalLoading.set(!0);animalLoadingEnd=()=>this.animalLoading.set(!1);loginLoadingStart=()=>this.loginLoading.set(!0);loginLoadingEnd=()=>this.loginLoading.set(!1);state={animals:this.animals.asReadonly(),animalLoading:this.animalLoading.asReadonly(),loginLoading:this.loginLoading.asReadonly()};static \u0275fac=function(t){return new(t||e)};static \u0275prov=f({token:e,factory:e.\u0275fac})};var v=class e{store=s(m);execute(){return I(this,null,function*(){this.store.animalLoadingStart();try{let i=yield b(ie.getAnimals());this.store.setAnimals(i.animals)}finally{this.store.animalLoadingEnd()}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=f({token:e,factory:e.\u0275fac})};var M=class e{store=s(m);authStore=s(ee);router=s($);execute(i){return I(this,null,function*(){this.store.loginLoadingStart(),yield b(te.login(i)),this.authStore.setAnimal(i),this.router.navigateByUrl("/home")})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=f({token:e,factory:e.\u0275fac})};function Ae(){return[v,M]}function Ie(){return{init:s(v),login:s(M)}}var Pe=(e,i)=>i.id;function we(e,i){e&1&&(a(0,"div",3),u(1,"mat-spinner"),o())}function xe(e,i){if(e&1&&(a(0,"mat-list-option",4),u(1,"img",5),a(2,"h3",6),p(3),o(),a(4,"p",7),p(5),o()()),e&2){let t=i.$implicit;d("value",t.id),r(),G("src","img/animals/",t.id,".webp",U),z("alt",t.name),r(2),J(t.name),r(2),K("@",t.id,"")}}function De(e,i){if(e&1&&W(0,xe,6,6,"mat-list-option",4,Pe),e&2){let t=Z();q(t.animals())}}var N=class e{animals=h.required();isLoading=h.required();selectedAnimalId=R.required();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-animal-select"]],inputs:{animals:[1,"animals"],isLoading:[1,"isLoading"],selectedAnimalId:[1,"selectedAnimalId"]},outputs:{selectedAnimalId:"selectedAnimalIdChange"},decls:7,vars:3,consts:[["form","ngForm"],["name","animal",3,"ngModelChange","multiple","ngModel"],["mat-subheader",""],[1,"loading"],[3,"value"],["matListItemAvatar","",3,"src","alt"],["matListItemTitle",""],["matListItemLine",""]],template:function(t,n){if(t&1){let g=x();a(0,"form",null,0)(2,"mat-selection-list",1),E("ngModelChange",function(l){return L(g),O(n.selectedAnimalId,l)||(n.selectedAnimalId=l),_(l)}),a(3,"h2",2),p(4,"\u3069\u306E\u52D5\u7269\u306B\u306A\u308B\uFF1F"),o(),P(5,we,2,0,"div",3)(6,De,2,0),o()()}t&2&&(r(2),d("multiple",!1),F("ngModel",n.selectedAnimalId),r(3),w(n.isLoading()?5:6))},dependencies:[fe,ue,pe,de,ge,ce,me,H,T,le,se,ne,ae,re,oe],styles:["[_nghost-%COMP%]{display:block;background-color:var(--mat-sys-surface)}[_nghost-%COMP%]{--mdc-list-list-item-leading-avatar-color: var(--mat-sys-surface)}h2[_ngcontent-%COMP%]{font:var(--mat-sys-headline)}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}"],changeDetection:0})};function Fe(e,i){e&1&&u(0,"mat-spinner",1)}function Oe(e,i){e&1&&p(0," \u30ED\u30B0\u30A4\u30F3 ")}var j=class e{canLogin=h.required();isLoading=h.required();login=B();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-hero-header"]],inputs:{canLogin:[1,"canLogin"],isLoading:[1,"isLoading"]},outputs:{login:"login"},decls:11,vars:2,consts:[["mat-flat-button","",3,"click","disabled"],["diameter","20"]],template:function(t,n){t&1&&(a(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title")(3,"h1"),p(4,"Zootter"),o()(),a(5,"mat-card-subtitle"),p(6,"Zootter\u306F\u3001\u52D5\u7269\u305F\u3061\u304C\u4E3B\u5F79\u306ESNS\u3002\u52D5\u7269\u3092\u9078\u3093\u3067\u5165\u5712\u3057\u3088\u3046\uFF01"),o()(),a(7,"mat-card-actions")(8,"button",0),D("click",function(){return n.login.emit()}),P(9,Fe,1,0,"mat-spinner",1)(10,Oe,1,0),o()()()),t&2&&(r(8),d("disabled",!n.canLogin()),r(),w(n.isLoading()?9:10))},dependencies:[Se,ye,ve,Me,_e,Le,Ce,he,H,T],styles:["[_nghost-%COMP%]{display:block;padding:16px}[_nghost-%COMP%]{--mat-card-subtitle-text-color: var(--mat-sys-on-primary)}[_nghost-%COMP%]{--mdc-filled-button-container-color: var(--mat-sys-primary-container)}[_nghost-%COMP%]{--mdc-filled-button-label-text-color: var(--mat-sys-on-primary-container)}mat-card[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary);color:var(--mat-sys-on-primary)}mat-card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})};var k=class e{usecases=Ie();state=s(m).state;selectedAnimalId=C([]);canLogin=Y(()=>this.selectedAnimalId().length>0);ngOnInit(){this.usecases.init.execute()}login(){this.canLogin()&&!this.state.loginLoading()&&this.usecases.login.execute(this.selectedAnimalId()[0])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-login"]],features:[X([Ae(),m])],decls:5,vars:5,consts:[[3,"login","canLogin","isLoading"],[3,"selectedAnimalIdChange","animals","isLoading","selectedAnimalId"]],template:function(t,n){if(t&1){let g=x();Q(0)(1)(2),a(3,"app-hero-header",0),D("login",function(){return L(g),_(n.login())}),o(),a(4,"app-animal-select",1),E("selectedAnimalIdChange",function(l){return L(g),O(n.selectedAnimalId,l)||(n.selectedAnimalId=l),_(l)}),o()}if(t&2){let g=n.state.loginLoading(),A=n.state.animals(),l=n.state.animalLoading();r(3),d("canLogin",n.canLogin())("isLoading",g),r(),d("animals",A)("isLoading",l),F("selectedAnimalId",n.selectedAnimalId)}},dependencies:[j,N],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100vh}app-animal-select[_ngcontent-%COMP%]{flex:1;overflow:auto}"],changeDetection:0})};var S=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=c({type:e,selectors:[["app-login-page"]],decls:1,vars:0,template:function(t,n){t&1&&u(0,"app-login")},dependencies:[k],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var Ot=[{path:"",component:S}];export{Ot as default};
