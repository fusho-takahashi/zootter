import{g as rt,h as lt,j as pt,k as mt,n as ct,p as dt}from"./chunk-3QXBDRB3.js";import{a as x,b as V,c as q}from"./chunk-AECKTGJO.js";import"./chunk-WHBVZAYM.js";import{a as It,b as ht}from"./chunk-FBW6YO7F.js";import{f as ft,g as ut,h as gt,j as Lt,m as yt,o as Ct}from"./chunk-BWKZS2ZY.js";import{M as at,P as A}from"./chunk-HQ3KQCWE.js";import{$a as s,Ba as g,Bb as T,Cb as tt,Db as N,Eb as R,Fb as d,Gb as p,Hb as m,Jb as et,Kb as it,Lb as P,Pb as Q,Vb as C,Wb as w,Ya as Z,Yb as ot,aa as a,ac as j,bc as L,cc as y,dc as S,e as h,ec as st,fc as nt,ga as n,ib as r,na as X,oa as Y,pc as M,rb as u,t as v,vb as D,xb as l}from"./chunk-T223ME74.js";var Dt={id:"",name:"",animals:[],description:""},b=class e{listInfo=u(Dt);loading=u(!1);setListInfo=i=>this.listInfo.set(i);loadingStart=()=>this.loading.set(!0);loadingEnd=()=>this.loading.set(!1);state={listInfo:this.listInfo.asReadonly(),loading:this.loading.asReadonly(),isReady:M(()=>this.listInfo().id!==""&&!this.loading())};static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};var F=class e{store=n(b);execute(i){return h(this,null,function*(){this.store.loadingStart();try{let t=yield v(x.getListDetail(i));this.store.setListInfo(t)}finally{this.store.loadingEnd()}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};function vt(){return[F]}function Mt(){return{init:n(F)}}var jt=()=>["/list"];function St(e,i){if(e&1&&m(0,"img",3),e&2){let t=i.$implicit;Q("src","img/animals/",t,".webp",Z),Q("alt","Photo of ",t,"")}}var $=class e{name=g.required();animals=g.required();description=g.required();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-list-info-card"]],inputs:{name:[1,"name"],animals:[1,"animals"],description:[1,"description"]},decls:15,vars:4,consts:[["appearance","outlined"],["mat-icon-button","",3,"routerLink"],[1,"animal-images"],["width","32","height","32",3,"src","alt"]],template:function(t,o){t&1&&(d(0,"mat-card",0)(1,"a",1)(2,"mat-icon"),C(3,"arrow_back"),p()(),m(4,"mat-card-header"),d(5,"mat-card-content")(6,"h2")(7,"mat-icon"),C(8,"list"),p(),C(9),p(),d(10,"div",2),N(11,St,1,4,"img",3,tt),p(),d(13,"p"),C(14),p()()()),t&2&&(s(),l("routerLink",st(3,jt)),s(8),w(o.name()),s(2),R(o.animals()),s(3),w(o.description()))},dependencies:[Ct,gt,Lt,yt,q,V,ut,ft,A],styles:["[_nghost-%COMP%]{width:100%;display:block}mat-card[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary);color:var(--mat-sys-on-primary)}mat-card[_ngcontent-%COMP%]{--mdc-outlined-card-outline-color: var(--mat-sys-primary)}mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;background-color:var()}h2[_ngcontent-%COMP%]{font:var(--mat-sys-title-large);margin:unset;display:flex;align-items:center;gap:8px}.animal-images[_ngcontent-%COMP%]{display:flex}p[_ngcontent-%COMP%]{font:var(--mat-sys-title-small);margin:unset}a[_ngcontent-%COMP%]{position:absolute}a[_ngcontent-%COMP%]{--mdc-icon-button-icon-color: var(--mat-sys-on-primary)}"],changeDetection:0})};function kt(e,i){if(e&1&&m(0,"app-list-info-card",0),e&2){P();let t=y(1),o=y(2),f=y(3);l("name",t)("animals",o)("description",f)}}var B=class e{listId=g.required();usecases=Mt();state=n(b).state;ngOnInit(){this.usecases.init.execute(this.listId())}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-list-info"]],inputs:{listId:[1,"listId"]},features:[S([vt(),b])],decls:5,vars:4,consts:[[3,"name","animals","description"]],template:function(t,o){if(t&1&&(j(0)(1)(2)(3),D(4,kt,1,3,"app-list-info-card",0)),t&2){let f=o.state.isReady();s(),L(o.state.listInfo().name),s(),L(o.state.listInfo().animals),s(),L(o.state.listInfo().description),s(),T(f?4:-1)}},dependencies:[$],styles:["[_nghost-%COMP%]{display:block;padding:16px}"],changeDetection:0})};var I=class e{listId=u("");posts=u([]);totalPostCount=u(0);loading=u(!1);setListId=i=>this.listId.set(i);updatePosts=i=>this.posts.update(t=>[...t,...i]);setTotalPostCount=i=>this.totalPostCount.set(i);loadingStart=()=>this.loading.set(!0);loadingEnd=()=>this.loading.set(!1);state={listId:this.listId.asReadonly(),posts:this.posts.asReadonly(),postCount:M(()=>this.posts().length),loading:this.loading.asReadonly(),initLoading:M(()=>this.loading()&&this.posts().length===0),isAllLoaded:M(()=>this.posts().length>=this.totalPostCount())};static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};var O=class e{store=n(I);execute(i){return h(this,null,function*(){this.store.setListId(i),this.store.loadingStart();try{let t=yield v(x.getListPosts(i,0,10));this.store.updatePosts(t.posts),this.store.setTotalPostCount(t.totalCount)}finally{this.store.loadingEnd()}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};var E=class e{store=n(I);execute(){return h(this,null,function*(){let i=this.store.state.listId(),t=this.store.state.postCount();this.store.loadingStart();try{let o=yield v(x.getListPosts(i,t,10));this.store.updatePosts(o.posts),this.store.setTotalPostCount(o.totalCount)}finally{this.store.loadingEnd()}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};function xt(){return[O,E]}function Pt(){return{init:n(O),loadMore:n(E)}}function wt(e,i){if(e&1){let t=et();m(0,"app-post-list",0),d(1,"app-load-more",1),it("loadMore",function(){X(t);let f=P();return Y(f.loadMore())}),p()}if(e&2){P();let t=y(0),o=y(1),f=y(2);l("posts",t),s(),l("isLoading",o)("isAllLoaded",f)}}var z=class e{listId=g.required();usecases=Pt();state=n(I).state;ngOnInit(){this.usecases.init.execute(this.listId())}loadMore(){this.usecases.loadMore.execute()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-list-timeline"]],inputs:{listId:[1,"listId"]},features:[S([xt(),I])],decls:5,vars:4,consts:[[3,"posts"],[3,"loadMore","isLoading","isAllLoaded"]],template:function(t,o){if(t&1&&(j(0)(1)(2)(3),D(4,wt,2,3)),t&2){L(o.state.posts()),s(),L(o.state.loading()),s(),L(o.state.isAllLoaded());let f=o.state.initLoading();s(2),T(f?-1:4)}},dependencies:[ht,It],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0})};var H=class e{route=n(at);listId=this.route.snapshot.params.id;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-list-page"]],decls:2,vars:2,consts:[[3,"listId"]],template:function(t,o){t&1&&m(0,"app-list-info",0)(1,"app-list-timeline",0),t&2&&(l("listId",o.listId),s(),l("listId",o.listId))},dependencies:[B,z],styles:["[_nghost-%COMP%]{display:block;height:100%}"],changeDetection:0})};var _=class e{lists=u([]);isLoading=u(!1);setLists=i=>this.lists.set(i);loadingStart=()=>this.isLoading.set(!0);loadingEnd=()=>this.isLoading.set(!1);state={lists:this.lists.asReadonly(),isReady:M(()=>!this.isLoading())};static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};var U=class e{store=n(_);execute(){return h(this,null,function*(){this.store.loadingStart();try{let i=yield v(x.getLists());this.store.setLists(i.lists)}finally{this.store.loadingEnd()}})}static \u0275fac=function(t){return new(t||e)};static \u0275prov=a({token:e,factory:e.\u0275fac})};function bt(){return[U]}function _t(){return{init:n(U)}}var Ft=(e,i)=>i.id,Ot=e=>["/list",e];function Et(e,i){if(e&1&&(d(0,"mat-list-item",0)(1,"mat-icon",1),C(2,"list"),p(),d(3,"h3",2),C(4),p(),d(5,"p",3),C(6),p()()),e&2){let t=i.$implicit;l("routerLink",nt(4,Ot,t.id)),s(4),w(t.name),s(2),ot(" ",t.animals.length," member",t.animals.length>0?"s":""," ")}}var G=class e{lists=g.required();static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-list-list"]],inputs:{lists:[1,"lists"]},decls:3,vars:0,consts:[[3,"routerLink"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""]],template:function(t,o){t&1&&(d(0,"mat-nav-list"),N(1,Et,7,6,"mat-list-item",0,Ft),p()),t&2&&(s(),R(o.lists()))},dependencies:[dt,ct,mt,pt,lt,rt,q,V,A],styles:["[_nghost-%COMP%]{display:block;background-color:var(--mat-sys-surface)}"],changeDetection:0})};function Ut(e,i){if(e&1&&m(0,"app-list-list",0),e&2){P();let t=y(1);l("lists",t)}}var J=class e{usecases=_t();state=n(_).state;ngOnInit(){this.usecases.init.execute()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-lists"]],features:[S([bt(),_])],decls:3,vars:2,consts:[[3,"lists"]],template:function(t,o){if(t&1&&(j(0)(1),D(2,Ut,1,1,"app-list-list",0)),t&2){let f=o.state.isReady();s(),L(o.state.lists()),s(),T(f?2:-1)}},dependencies:[G],styles:["[_nghost-%COMP%]{display:block;height:100%}"],changeDetection:0})};var K=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=r({type:e,selectors:[["app-lists-page"]],decls:1,vars:0,template:function(t,o){t&1&&m(0,"app-lists")},dependencies:[J],styles:["[_nghost-%COMP%]{display:block;height:100%}"],changeDetection:0})};var wi=[{path:"",component:K},{path:":id",component:H}];export{wi as default};
